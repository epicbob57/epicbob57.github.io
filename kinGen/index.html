<!DOCTYPE html>
<html>
<head>
<title>Kindle Genesis</title>
<script type="text/javascript">
function dlSearch(text) {
    
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState == XMLHttpRequest.DONE) {
            parseSearch(this.responseText)
        }   
    }
    xhr.open("GET", "http://cors-proxy.htmldriven.com/?url=http://gen.lib.rus.ec/foreignfiction/index.php?s="+encodeURIComponent(text),true);
    xhr.send(null);
}
function parseSearch(html){
console.log(html);}
function convert(url) {
var data = JSON.stringify({
    "input": [
        {
            "type": "remote",
            "source": url
        }
    ],
    "conversion": [
        {
            "category": "ebook",
            "target": "mobi"
        }
    ]
});

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function () {
    //if (this.readyState === 4) {
        console.log(this.responseText);
    //}
});

xhr.open("POST", "http://api2.online-convert.com/jobs");
xhr.setRequestHeader("x-oc-api-key", "52c5f7f870448df3993d1f5dc51a580a");
xhr.setRequestHeader("content-type", "application/json");
xhr.setRequestHeader("cache-control", "no-cache");

xhr.send(data);
console.log(xhr);
}
</script>
</head>

<body>
<h1>Kindle Genesis</h1>
<input type="text" placeholder="Search LibGen..."></input>
    
</body>
</html>
